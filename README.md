# –ö–ª–∞—Å—Å Base –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQLAlchemy

–ö–ª–∞—Å—Å `Base` —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é SQLAlchemy –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Singleton, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`host`, `port`, `user` –∏ —Ç.–¥.).
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (`with Base(...) as db`) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á—Ç–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Pandas (`sql_read()`).
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–∏–ø–æ–≤ –∏ –¥–æ–ø—É—Å–∫–∞ `None` —á–µ—Ä–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ã (`DescriptorBase`).
- –ì–∏–±–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: —Å—Ä–∞–∑—É (`auto_connect=True`) –∏–ª–∏ –≤—Ä—É—á–Ω—É—é.

## üîß –ê—Ç—Ä–∏–±—É—Ç—ã

| –ê—Ç—Ä–∏–±—É—Ç       | –¢–∏–ø     | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|---------------|---------|----------------------------------|
| `driver_name` | `str`   | –ù–∞–∑–≤–∞–Ω–∏–µ –¥—Ä–∞–π–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `'postgresql'`) |
| `username`    | `str`   | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                 |
| `password`    | `str`   | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è              |
| `host`        | `str`   | –•–æ—Å—Ç –ë–î                         |
| `database`    | `str`   | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö                  |
| `port`        | `str`   | –ü–æ—Ä—Ç                             |
| `connect`     | –æ–±—ä–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è SQLAlchemy, –∏–ª–∏ `None` |
| `engine`      | SQLAlchemy Engine                        |

## üî® –ú–µ—Ç–æ–¥—ã

### `__new__(...)`
–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `__new__`, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω Singleton.

### `create_url() -> sqlalchemy.engine.URL`
–°–æ–∑–¥–∞—ë—Ç URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

### `create_engine() -> sqlalchemy.Engine`
–°–æ–∑–¥–∞—ë—Ç –¥–≤–∏–∂–æ–∫ SQLAlchemy –Ω–∞ –æ—Å–Ω–æ–≤–µ URL.

### `auto_connect() -> sqlalchemy.Connection`
–û—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.

### `close_connect()`
–ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

### `sql_read(query: str, schema: str = '') -> pd.DataFrame`
–í—ã–ø–æ–ª–Ω—è–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `DataFrame`.

## üîÅ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
with Base(
    driver_name="postgresql",
    username="user",
    password="pass",
    host="localhost",
    database="db",
    port="5432",
    auto_connect=True
) as db:
    df = db.sql_read("SELECT * FROM my_table")
